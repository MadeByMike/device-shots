var device_shots=function(){function a(a){return document.querySelectorAll(a)[0]}function b(b){var c=document.createElement("option");c.value=b.id,c.innerHTML=b.name,a("#device-settings-type").appendChild(c),b=new p(b),n.push(b),b.svg.querySelector(".device-image").setAttribute("xlink:href","./img/background_default.svg")}function c(b){var c,d,e,g;for(n.forEach(function(a){a.svg.querySelector(".device-image").setAttribute("xlink:href","./img/background_default.svg"),a.id===b?(l=a,a.active=!0,a.svg.setAttribute("class","active "+a.styles[a.default_style][1]),a.export_cache_size=a.sizes[a.default_size]):(a.active=!1,a.svg.setAttribute("class",""))}),c="",g=0;g<l.styles.length;++g)e=l.styles[g],d="",g===l.default_style&&(d='selected="selected"'),c+='<option value="'+e[1]+'" '+d+">"+e[0]+"</option>";for(a("#device-settings-style").innerHTML=c,c="",g=0;g<l.sizes.length;++g)e=l.sizes[g],d="",g===l.default_size&&(d='selected="selected"'),c+='<option value="'+g+'" '+d+">"+e[0]+"x"+e[1]+"</option>";a("#device-settings-size").innerHTML=c,f()}function d(a,b,c){var d=document.createElement("img"),e=a.outerHTML,f="data:image/svg+xml,"+e;d.onload=function(){var a=document.createElement("canvas");a.width=l.export_cache_size[0]+2*b,a.height=l.export_cache_size[1]+2*b,a.getContext("2d").drawImage(d,b,b,l.export_cache_size[0],l.export_cache_size[1]),c(a.toDataURL("image/png"))},d.src=f}function e(b){var c=document.createElement("img");n.forEach(function(a){a.svg.querySelector(".device-image").setAttribute("xlink:href",b.target.result)}),c.onload=function(){var b=this.width/this.height,c=l.svg.querySelector(".device-image"),d=c.height/c.width;a("#messages").innerHTML=Math.round(1e3*b)/1e3!==d?'<div class="message"><p><a href="javascrip:;" class="close">close</a>Hey! The image you placed isn\'t a great shape for the device you\'ve selected. It\'ll still work - but it might look a bit strange.</p></div>':""},c.src=b.target.result,f()}function f(){a("#export-form button").disabled=!0,d(l.svg,50,function(b){a("#export-form button").disabled=!1,l.export_cache_cache=b})}function g(a){var b=new FileReader;b.onload=e,b.readAsDataURL(a)}function h(a){a.preventDefault(),a.stopPropagation(),o=!1,document.body.classList.remove("dragging");var b=a.dataTransfer.files;b[0].type.match("image.*")&&1===b.length&&g(b[0])}function i(a){a.stopPropagation(),a.preventDefault(),o=!0}function j(a){a.stopPropagation(),a.preventDefault(),o=!1,clearTimeout(m),m=setTimeout(function(){o||document.body.classList.remove("dragging")},200)}function k(a){a.preventDefault(),a.stopPropagation();var b=a.dataTransfer.items,c=!1;o=!0,b[0].type.match("image.*")&&1===b.length||(c=!0),c?(document.body.classList.add("dragging","files-not-ok"),a.dataTransfer.dropEffect="none"):(document.body.setAttribute("class","dragging","files-ok"),a.dataTransfer.dropEffect="move")}var l,m,n=[],o=!1,p=function(b){for(var c in b)this[c]=b[c];return this.svg=a(this.id),this.image=a(this.id+" .device-image"),this.export_cache_cache="",this.export_cache_size=[],this.active=!1,this.svg.addEventListener("click",function(){a("#file-select-no-drag").click()},!1),this};return a("#device-settings-style").addEventListener("change",function(){var b=a("#device-settings-style").options[a("#device-settings-style").selectedIndex].value;l.svg.setAttribute("class","active "+b),f()},!0),a("#device-settings-size").addEventListener("change",function(){var b=a("#device-settings-size").options[a("#device-settings-size").selectedIndex].value;l.export_cache_size=l.sizes[b],f()},!0),a("#device-settings-type").addEventListener("change",function(){var b=a("#device-settings-type").options[a("#device-settings-type").selectedIndex].value;c(b),f()},!0),document.addEventListener("dragenter",i,!1),document.addEventListener("dragover",k,!1),document.addEventListener("dragleave",j,!1),document.addEventListener("drop",h,!1),a("#file-select-no-drag").addEventListener("change",function(){var b=a("#file-select-no-drag").files;b[0].type.match("image.*")&&1===b.length&&g(b[0])}),a("#device-settings-form").addEventListener("submit",function(a){a.preventDefault()},!0),a("#export-form").addEventListener("submit",function(a){a.preventDefault()},!0),a("#messages").addEventListener("click",function(a){a.target.classList.contains("close")&&(this.innerHTML="")}),document.addEventListener("click",function(b){if(a("#device-settings")===b.target.parentNode&&"A"===b.target.tagName)a("#device-settings-form").classList.contains("open")?a("#device-settings-form").classList.remove("open"):a("#device-settings-form").classList.add("open");else{for(var c=!1,d=b.target.parentNode;d=d.parentNode;)d===a("#device-settings")&&(c=!0);c||a("#device-settings-form").classList.remove("open")}}),a("#export-form").addEventListener("click",function(){a("#export-form button").disabled!==!0&&window.open(l.export_cache_cache)}),{create_device:b,set_device:c}}(),device_list=[{name:"iPhone 4",id:"#device-iphone",styles:[["Realistic dark","realistic dark"],["Realistic light","realistic light"],["Lineart light","lineart light"],["Lineart dark","lineart dark"],["Wireframe light","wireframe light"],["Wireframe dark","wireframe dark"],["Simple dark","simple dark"],["Simple light","simple light"]],default_style:0,sizes:[[100,200],[400,800],[500,1e3],[600,1200]],default_size:2},{name:"Galaxy",id:"#device-galaxy",styles:[["Realistic dark","realistic dark"],["Realistic light","realistic light"],["Lineart light","lineart light"],["Lineart dark","lineart dark"],["Wireframe light","wireframe light"],["Wireframe dark","wireframe dark"],["Simple dark","simple dark"],["Simple light","simple light"]],default_style:0,sizes:[[100,200],[400,800],[500,1e3],[600,1200]],default_size:2},{name:"iPad",id:"#device-ipad",styles:[["Dark","dark"],["Light","light"],["Wireframe dark","wireframe dark"],["Wireframe light","wireframe light"],["Lineart dark","lineart dark"],["Lineart light","lineart light"]],default_style:0,sizes:[[200,150],[400,300],[800,600],[1040,780],[1200,900]],default_size:3},{name:"browser",id:"#device-browser",styles:[["Default","default"]],default_style:0,sizes:[[200,150],[400,300],[800,600],[1040,780],[1200,900]],default_size:3}],supported=window.File&&window.FileList&&window.FileReader;supported?(device_list.forEach(function(a){device_shots.create_device(a)}),device_shots.set_device(device_list[0].id)):(document.getElementById("device").outerHTML='<a href="http://browsehappy.com/"><img src="./img/cracked.png"></a>',document.getElementById("messages").innerHTML='<div class="message"><span>Sorry :(</span><p>Your web browser is not as good as it could be. To use Device Shots you will need to upgrade. Visit <a href="http://browsehappy.com/">http://browsehappy.com/</a> to find out how.</p></div>');
//# sourceMappingURL=main.min.map